<!DOCTYPE html>
<html>
<head>
  <title>Love Calculator</title>
</head>
<body>
  <h2>Love Calculator ðŸ’–</h2>
  <input id="girlName" placeholder="Enter girl's name"><br><br>
  <input id="boyName" placeholder="Enter boy's name"><br><br>
  <button onclick="calculateLove()">Calculate Love</button>

  <p id="result"></p>

  <h3>Past Data</h3>
  <pre id="pastData"></pre>

  <script>
    function calculateLove() {
      const girl = document.getElementById("girlName").value;
      const boy = document.getElementById("boyName").value;

      if (!girl || !boy) {
        alert("Please enter both names.");
        return;
      }

      let score;
      if (girl.toLowerCase() === "tanvi" && boy.toLowerCase() === "anurag") {
        score = 100;
      } else {
        score = Math.floor(Math.random() * 100) + 1;
      }

      document.getElementById("result").innerText =
        "Love score between " + girl + " and " + boy + " is " + score + "%";

      const url = "https://script.google.com/macros/s/AKfycbztzwTJlmK6kmjLBd-CLokm5vu5vDW-z3A7856Exa99kkIhVGGvWSoleQUIXNLGmuvv/exec";

      // Corrected POST request
      fetch(url, {
        method: "POST",
        body: JSON.stringify({
          girlName: girl,
          boyName: boy,
          score: score
        }),
        headers: {
          "Content-Type": "application/json"
        }
      })
      .then(res => res.json())
      .then(data => {
        console.log("Saved:", data);
        fetchPastData(); // Fetch updated data after save
      })
      .catch(err => console.error("Error:", err));
    }

    // Fetch past CSV data
    function fetchPastData() {
      const url = "https://script.google.com/macros/s/AKfycbztzwTJlmK6kmjLBd-CLokm5vu5vDW-z3A7856Exa99kkIhVGGvWSoleQUIXNLGmuvv/exec";

      fetch(url)
        .then(response => response.text())
        .then(csvData => {
          document.getElementById("pastData").innerText = csvData;
        })
        .catch(err => console.error("Error fetching past data:", err));
    }

    // Optional: auto-load past data when page opens
    window.onload = fetchPastData;
  </script>
</body>
</html>
