<!DOCTYPE html>
<html>
<head>
  <title>Love Calculator</title>
</head>
<body>
  <h2>Love Calculator ðŸ’–</h2>
  <input id="girlName" placeholder="Enter girl's name"><br><br>
  <input id="boyName" placeholder="Enter boy's name"><br><br>
  <button onclick="calculateLove()">Calculate Love</button>

  <p id="result"></p>

  <h3>Past Data</h3>
  <pre id="pastData"></pre> <!-- To display past data from CSV -->
  <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCDG2lZpLgJ2PG2WX3TfVGI3HcnzcukC7s",
    authDomain: "lovefinder-193df.firebaseapp.com",
    databaseURL: "https://lovefinder-193df-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "lovefinder-193df",
    storageBucket: "lovefinder-193df.firebasestorage.app",
    messagingSenderId: "572820717197",
    appId: "1:572820717197:web:e67be9eaf6087cda4cacc4",
    measurementId: "G-CHBWSKLVTS"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>

  <script>
    function calculateLove() {
      const girl = document.getElementById("girlName").value;
      const boy = document.getElementById("boyName").value;

      // Check for the special exception (Tanvi and Anurag)
      let score;
      if (girl.toLowerCase() === "tanvi" && boy.toLowerCase() === "anurag") {
        score = 100;  // Special condition for Tanvi and Anurag
      } else {
        score = Math.floor(Math.random() * 100) + 1;  // Normal random score between 1 and 100
      }

      document.getElementById("result").innerText =
        "Love score between " + girl + " and " + boy + " is " + score + "%";

      const url = "https://script.google.com/macros/s/AKfycbztzwTJlmK6kmjLBd-CLokm5vu5vDW-z3A7856Exa99kkIhVGGvWSoleQUIXNLGmuvv/exec"; // Your Google Apps Script URL

      // Send POST request to save data
      fetch(url, {
        method: "GET, POST, OPTIONS",
        body: JSON.stringify({
          girlName: girl,
          boyName: boy,
          score: score
        }),
        headers: {
          "Content-Type": "application/json"
        }
      })
      .then(res => res.json())
      .then(data => console.log("Saved:", data))
      .catch(err => console.error("Error:", err));

      // Fetch all past data (CSV) after saving
      fetchPastData();
    }

    // Function to fetch and display past data
    function fetchPastData() {
      const url = "https://script.google.com/macros/s/AKfycbztzwTJlmK6kmjLBd-CLokm5vu5vDW-z3A7856Exa99kkIhVGGvWSoleQUIXNLGmuvv/exec"; // Your Google Apps Script URL

      fetch(url)
        .then(response => response.text())
        .then(csvData => {
          // Display CSV data in the <pre> element
          document.getElementById("pastData").innerText = csvData;
        })
        .catch(err => console.error("Error fetching past data:", err));
    }
  </script>
  
</body>
</html>
